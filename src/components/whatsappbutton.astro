---
const phoneNumber = "+5493515439227";
const message = "¡Hola Innova! Quisiera más información.";
---

<a 
  id="whatsapp-button"
  href={`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`} 
  target="_blank" 
  class="fixed bottom-6 right-6 z-50 bg-green-500 hover:bg-green-600 rounded-full p-3 shadow-lg transition-all duration-500 ease-in-out transform opacity-0 pointer-events-none scale-90"
  aria-label="Chatea con nosotros por WhatsApp"
>
  <svg 
    xmlns="http://www.w3.org/2000/svg" 
    class="h-6 w-6 text-white" 
    fill="currentColor" 
    viewBox="0 0 24 24"
  >
    <path d="M20.52 3.48A12 12 0 0012 0C5.37 0 .01 5.37 0 12a12 12 0 001.64 6L0 24l6-1.6A12 12 0 0012 24c6.63 0 12-5.37 12-12a11.94 11.94 0 00-3.48-8.52zM12 22a10 10 0 01-5.19-1.43l-.37-.22-3.58.96.96-3.58-.22-.37A10 10 0 1122 12a9.94 9.94 0 01-2.93 7.07A9.94 9.94 0 0112 22zm5.26-7.54l-2.27-.65a1 1 0 00-1 .26l-.46.47a7.34 7.34 0 01-3.52-3.52l.47-.46a1 1 0 00.26-1l-.65-2.27a1 1 0 00-.95-.7h-2A1 1 0 007 7v1c0 5.52 4.48 10 10 10h1a1 1 0 001-1v-2a1 1 0 00-.7-.95z"/>
  </svg>
</a>

<script is:inline>
  const button = document.getElementById('whatsapp-button');
  const splashSection = document.querySelector('section#splash');

  if (splashSection) {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          button.classList.add('opacity-0', 'pointer-events-none', 'scale-90');
          button.classList.remove('opacity-100', 'scale-100');
        } else {
          button.classList.remove('opacity-0', 'pointer-events-none', 'scale-90');
          button.classList.add('opacity-100', 'scale-100');
        }
      },
      {
        threshold: 0.2,
      }
    );

    observer.observe(splashSection);
  }
</script>
